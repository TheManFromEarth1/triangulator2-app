(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{226:function(e,t,a){var n={"./bmp":227,"./bmp.js":227,"./dds":228,"./dds.js":228,"./gif":229,"./gif.js":229,"./jpg":230,"./jpg.js":230,"./png":231,"./png.js":231,"./psd":232,"./psd.js":232,"./svg":233,"./svg.js":233,"./tiff":234,"./tiff.js":234,"./webp":235,"./webp.js":235};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=226},247:function(e,t,a){e.exports=a(569)},252:function(e,t,a){},429:function(e,t){},446:function(e,t){},448:function(e,t){},569:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(236),s=a.n(i),r=(a(252),a(141)),l=a.n(r),c=a(245),d=a(237),u=a(50),h=a(89),g=a(63),m=a(246),p=a(238),v=a(90),f=a(244),E=a(239),b=a.n(E),C=a(572),S=a(573),y=a(574),k=a(575),N=a(576),w=a(577),O=a(578),j=a(579),z=a(580),G=a(142),x=a(91),F=a.n(x),I=a(240),P=a.n(I),H=a(143),V=a.n(H),R=a(42),B=a.n(R),M=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={svgNeedsUpdating:!0,svgSizeCSS:{width:"",height:""},svgWidth:3840,svgHeight:2400,svgString:"",imageData:[],imageWidth:0,imageHeight:0,options:{isBrowser:!0,seed:4,width:3840,height:2400,gridMode:B.a.GridMode.Poisson,gridOverride:!1,cellSize:150,cellRandomness:.2,colorOverride:!1,color:B.a.ColorFunction.RadialFromBottom,colorScaleInvert:!1,colorPalette:["#e7a71d","#dc433e","#9e084b","#41062f"],colorRandomness:.15,quantizeSteps:0,useGradient:!0,gradient:B.a.GradientFunction.Random,gradientNegativeFactor:.03,gradientPositiveFactor:.03,strokeColor:!1,strokeWidth:1,strokeOnly:!1,backgroundColor:"#000000"}},a.allColorFunctions=Object(u.a)(Object.entries(B.a.ColorFunction).map(function(e){return e[1]})),a.allGradientFunctions=Object(u.a)(Object.entries(B.a.GradientFunction).map(function(e){return e[1]})),a.inputHandler=b.a.debounce(a.handleOptionChange,150).bind(Object(v.a)(a)),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var o=a.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var a=atob(o),n=a.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=a.charCodeAt(s);e(new Blob([i],{type:t||"image/png"}))})}}),a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"stripStyles",value:function(e){return e.replace(/style=\\?".*?\\?"/g,"")}},{key:"handleOptionChange",value:function(e){var t={svgNeedsUpdating:!0,options:this.state.options};"color"===e.id?t.options[e.id]=this.allColorFunctions[parseInt(e.value,10)]:"gradient"===e.id?t.options[e.id]=this.allGradientFunctions[parseInt(e.value,10)]:1===e.step?t.options[e.id]=parseInt(e.value,10):t.options[e.id]=parseFloat(e.value),"width"!==e.id&&"height"!==e.id||(console.log("yes"),t.options[e.id]=Math.max(t.options[e.id],256)),t.options.strokeOnly||(t.options.strokeWidth=1),this.setState(t)}},{key:"handleToggle",value:function(e){var t=this;return function(a){console.log(a.target);var n={svgNeedsUpdating:!0,options:t.state.options};n.options[a.target.id]=e,t.setState(n)}}},{key:"handleChangeColorStops",value:function(e){var t=this;return function(){var a=t.state.options.colorPalette.length+e;if(a>0&&a<=20){var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette=F.a.scale(t.state.options.colorPalette).mode("lch").colors(a),t.setState(n)}}}},{key:"handleColorChange",value:function(e){var t=this;return function(a){console.log(a,e);var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette[e]=a.hex,t.setState(n)}}},{key:"handleBackgroundColorChange",value:function(e){var t={svgNeedsUpdating:!0,options:this.state.options};t.options.backgroundColor=e.hex,this.setState(t)}},{key:"handleFile",value:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=new Image;a.onload=function(){var e=document.getElementById("imageProcessingCanvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,e.width,e.height),t.setState({imageData:n.getImageData(0,0,n.canvas.width,n.canvas.height).data,imageWidth:a.width,imageHeight:a.height})},a.src=e.target.result},a.readAsDataURL(e.files[0])}},{key:"generateSVG",value:function(){var e=Object(d.a)(l.a.mark(function e(t){var a,n,o,i,s,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.svgNeedsUpdating,o=a.options,!n||!t){e.next=15;break}return console.time("1"),e.next=5,this.setState({svgNeedsUpdating:!1});case 5:return e.next=7,this.setState({svgWidth:o.width,svgHeight:o.height});case 7:return t.innerHTML="",i=B.a.generate(Object(c.a)({svgInput:t,forceSVGSize:!1},o)),s=document.getElementById("image-container").clientWidth/document.getElementById("root").clientHeight,r={width:"",height:""},o.width/o.height>s?r.width="100%":r.height="100vh",e.next=14,this.setState({svgSizeCSS:r,svgString:i});case 14:console.timeEnd("1");case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveImage",value:function(){console.log(this.stripStyles(this.state.svgString)),P()("canvas",this.stripStyles(this.state.svgString)),document.getElementById("canvas").toBlob(function(e){V()(e,"tri2-".concat((new Date).toISOString(),".png"))})}},{key:"saveSVG",value:function(){var e=new Blob([this.stripStyles(this.state.svgString)]);V()(e,"tri2-".concat((new Date).toISOString(),".svg"))}},{key:"render",value:function(){var e=this;return o.a.createElement(C.a,{className:"main h-100"},o.a.createElement(S.a,{className:"h-100"},o.a.createElement(y.a,{xs:"8",lg:"9",className:"image-container",id:"image-container"},o.a.createElement("svg",{id:"image",style:this.state.svgSizeCSS,viewBox:"0 0 ".concat(this.state.svgWidth," ").concat(this.state.svgHeight),ref:this.generateSVG.bind(this)})),o.a.createElement(y.a,{xs:"4",lg:"3",className:"controls-container"},o.a.createElement(k.a,{className:"controls-form"},o.a.createElement("h1",{className:"header-light header-stylized-text"},"triangulator2"),o.a.createElement("small",null,"\xa9 2019 ",o.a.createElement("a",{href:"https://jackw01.github.io"},"jackw01"),". ",o.a.createElement("a",{href:"https://github.com/jackw01/triangulator2-app"},"View on Github")),o.a.createElement("hr",null),o.a.createElement(N.a,{className:"spacer-top"},o.a.createElement(w.a,{className:"input-group-label",for:"seed"},"Seed:"),o.a.createElement(O.a,{id:"seed",className:"w-100",bsSize:"sm",type:"number",step:"1",defaultValue:this.state.options.seed,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"resolution"},"Resolution:"),o.a.createElement(O.a,{id:"width",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.width,onChange:function(t){return e.inputHandler(t.target)}}),"\xa0x\xa0",o.a.createElement(O.a,{id:"height",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.height,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"gridMode"},"Grid Mode:"),o.a.createElement(O.a,{id:"gridMode",bsSize:"sm",type:"select",defaultValue:this.state.options.gridMode,onChange:function(t){return e.handleOptionChange(t.target)}},o.a.createElement("option",{value:"1"},"Square"),o.a.createElement("option",{value:"2"},"Triangle"),o.a.createElement("option",{value:"3"},"Poisson"),o.a.createElement("option",{value:"4"},"Override"))),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"cellSize"},"Cell Size:"),o.a.createElement("input",{id:"cellSize",type:"range",step:"1",min:"80",max:"512",defaultValue:this.state.options.cellSize,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,{className:3===this.state.options.gridMode?"hidden":""},o.a.createElement(w.a,{className:"input-group-label",for:"cellRandomness"},"Cell Randomness:"),o.a.createElement("input",{id:"cellRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.cellRandomness,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement("hr",null),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"color"},"Color Mode:"),o.a.createElement(O.a,{id:"color",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allColorFunctions.map(function(e,t){return o.a.createElement("option",{value:t},e.name)})),o.a.createElement(j.a,{size:"sm",className:"spacer-top"},o.a.createElement(z.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.colorScaleInvert},"Default"),o.a.createElement(z.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.colorScaleInvert},"Invert"))),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"colorRandomness"},"Color Randomness:"),o.a.createElement("input",{id:"colorRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.colorRandomness,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,{className:"color-picker-container"},o.a.createElement(w.a,{className:"input-group-label",for:"colorPalette"},"Color Palette:"),o.a.createElement(z.a,{id:"colorPaletteDecrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(-1).bind(this)},"Remove Color"),"\xa0",o.a.createElement(z.a,{id:"colorPaletteIncrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(1).bind(this)},"Add Color"),this.state.options.colorPalette.map(function(t,a){return o.a.createElement(G.ChromePicker,{color:t,disableAlpha:!0,onChangeComplete:e.handleColorChange(a).bind(e)})})),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"quantizeSteps"},"Color Quantization Levels:"),o.a.createElement("input",{id:"quantizeSteps",type:"range",step:"1",min:"0",max:"10",defaultValue:this.state.options.quantizeSteps,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement("hr",null),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"useGradient"},"Generate Gradients:"),o.a.createElement(j.a,{size:"sm"},o.a.createElement(z.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.useGradient},"On"),o.a.createElement(z.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.useGradient},"Off"))),o.a.createElement(N.a,{className:this.state.options.useGradient?"":"hidden"},o.a.createElement(w.a,{className:"input-group-label",for:"gradient"},"Gradient Mode:"),o.a.createElement(O.a,{id:"gradient",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allGradientFunctions.map(function(e,t){return o.a.createElement("option",{value:t},e.name)}))),o.a.createElement(N.a,{className:this.state.options.useGradient?"":"hidden"},o.a.createElement(w.a,{className:"input-group-label",for:"gradientNegativeFactor"},"Gradient Negative Factor:"),o.a.createElement("input",{id:"gradientNegativeFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientNegativeFactor,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,{className:this.state.options.useGradient?"":"hidden"},o.a.createElement(w.a,{className:"input-group-label",for:"gradientPositiveFactor"},"Gradient Positive Factor:"),o.a.createElement("input",{id:"gradientPositiveFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientPositiveFactor,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement("hr",null),o.a.createElement(N.a,null,o.a.createElement(w.a,{className:"input-group-label",for:"strokeOnly"},"Stroke Only Mode:"),o.a.createElement(j.a,{size:"sm"},o.a.createElement(z.a,{id:"strokeOnly",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.strokeOnly},"On"),o.a.createElement(z.a,{id:"strokeOnly",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.strokeOnly},"Off"))),o.a.createElement(N.a,{className:this.state.options.strokeOnly?"":"hidden"},o.a.createElement(w.a,{className:"input-group-label",for:"strokeWidth"},"Stroke Width:"),o.a.createElement("input",{id:"strokeWidth",type:"range",step:"0.001",min:"0.1",max:"20",defaultValue:this.state.options.strokeWidth,onChange:function(t){return e.inputHandler(t.target)}})),o.a.createElement(N.a,{className:this.state.options.strokeOnly?"color-picker-container":"hidden"},o.a.createElement(w.a,{className:"input-group-label",for:"backgroundColor"},"Background Color:"),o.a.createElement(G.ChromePicker,{color:this.state.options.backgroundColor,disableAlpha:!0,onChangeComplete:this.handleBackgroundColorChange.bind(this)})),o.a.createElement("hr",null),o.a.createElement(N.a,null,o.a.createElement(z.a,{size:"lg",color:"primary",onClick:this.saveImage.bind(this)},"Save Image"),o.a.createElement("br",null),o.a.createElement(z.a,{className:"spacer-top",size:"lg",color:"secondary",onClick:this.saveSVG.bind(this)},"Save SVG"))))),o.a.createElement("canvas",{id:"imageProcessingCanvas",className:"hidden"}),o.a.createElement("canvas",{id:"canvas",className:"hidden",width:this.state.svgWidth,height:this.state.svgHeight}))}}]),t}(n.Component);s.a.render(o.a.createElement(M,null),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.1a38223f.chunk.js.map