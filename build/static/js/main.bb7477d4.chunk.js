(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){var n=a(18),i=a(19);function r(e){return e*e*e*(e*(6*e-15)+10)}function o(e,t,a){return t+e*(a-t)}function s(e,t,a,n){var i=15&e,r=i<8?t:a,o=i<4?a:12===i||14===i?t:n;return(0===(1&i)?r:-r)+(0===(2&i)?o:-o)}e.exports=function(){"use strict";function e(t){n(this,e),this.permutation=[];for(var a=0;a<256;a++)this.permutation.push(a);for(var i=256;i>0;i--){var r=Math.floor(t()*i),o=this.permutation[i-1];this.permutation[i-1]=this.permutation[r],this.permutation[r]=o}for(var s=0;s<256;s++)this.permutation.push(this.permutation[s])}return i(e,[{key:"noise",value:function(e,t,a){var n=255&Math.floor(e),i=255&Math.floor(t),l=255&Math.floor(a),c=e-Math.floor(e),u=t-Math.floor(t),d=a-Math.floor(a),h=r(c),g=r(u),m=r(d),p=this.permutation[n]+i,f=this.permutation[p]+l,v=this.permutation[p+1]+l,S=this.permutation[n+1]+i,E=this.permutation[S]+l,b=this.permutation[S+1]+l;return o(m,o(g,o(h,s(this.permutation[f],c,u,d),s(this.permutation[E],c-1,u,d)),o(h,s(this.permutation[v],c,u-1,d),s(this.permutation[b],c-1,u-1,d))),o(g,o(h,s(this.permutation[f+1],c,u,d-1),s(this.permutation[E+1],c-1,u,d-1)),o(h,s(this.permutation[v+1],c,u-1,d-1),s(this.permutation[b+1],c-1,u-1,d-1))))+.5}}]),e}()},223:function(e,t,a){var n={"./bmp":224,"./bmp.js":224,"./dds":225,"./dds.js":225,"./gif":226,"./gif.js":226,"./jpg":227,"./jpg.js":227,"./png":228,"./png.js":228,"./psd":229,"./psd.js":229,"./svg":230,"./svg.js":230,"./tiff":231,"./tiff.js":231,"./webp":232,"./webp.js":232};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=223},243:function(e,t){e.exports=function(e,t,a,n){var i=a*a,r=3*i,o=a*Math.SQRT1_2,s=Math.ceil(e/o),l=Math.ceil(t/o),c=new Array(s*l),u=[],d=0,h=0;function g(e,t){var a=Math.floor(e/o),n=Math.floor(t/o),r=Math.max(a-2,0),u=Math.max(n-2,0),d=Math.min(a+3,s),h=Math.min(n+3,l);for(n=u;n<h;++n){var g=n*s;for(a=r;a<d;++a)if(c[g+a]){var m=c[g+a][0]-e,p=c[g+a][1]-t;if(m*m+p*p<i)return!1}}return!0}function m(e,t){var a=[e,t];return u.push(a),c[s*Math.floor(t/o)+Math.floor(e/o)]=a,h++,d++,a}return function(){if(!h)return m(n()*e,n()*t);for(;d;){for(var a=Math.floor(n()*d),o=0;o<30;++o){var s=2*Math.PI*n(),l=Math.sqrt(n()*r+i),c=u[a][0]+l*Math.cos(s),p=u[a][1]+l*Math.sin(s);if(c>=0&&c<e&&p>=0&&p<t&&g(c,p))return m(c,p)}u[a]=u[--d],u.length=d}return!1}}},248:function(e,t,a){e.exports=a(573)},253:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n=a(42),i=a(142),r=a.n(i),o=a(240),s=a(241),l=a.n(s),c=a(242),u=a.n(c),d=a(143),h=a.n(d),g=a(243),m=a.n(g),p=a(144),f=a.n(p);function v(e,t,a,n,i){return(e-t)*(i-n)/(a-t)+n}var S=Math.random,E=new f.a(S),b={pointCache:[],lastPointOptionsHash:"",GridMode:{Square:1,Triangle:2,Poisson:3,Override:4},ColorFunction:{Horizontal:function(e,t){return e},Vertical:function(e,t){return t},DiagonalFromLeft:function(e,t){return(e+t)/2},DiagonalFromRight:function(e,t){return(1-e+t)/2},RadialFromCenter:function(e,t){return Math.hypot(e-.5,t-.5)*Math.sqrt(2)*1.1},RadialFromBottom:function(e,t){return Math.hypot(e-.5,t-1.5)-.5},FromEdges:function(e,t){return.3*function(e,t){return 2*Math.min(Math.min(e,1-e),Math.min(t,1-t))}(e,t)+.7*(1-Math.hypot(e-.5,t-.5)*Math.sqrt(2))},Noise:function(e,t){return function(a,n){return E.noise(a*e,n*t,0)}}},GradientFunction:{Random:function(e,t,a){var i=Math.floor(3*S()),r=e[(i+1+Math.floor(2*S()))%3],o=[r[0]-e[i][0],r[1]-e[i][1]],s=Math.sign(o[0]*o[1]),l=o.map(function(e){return Math.abs(e)});return{gradientVector:l=l.map(function(e){return e/Math.max.apply(Math,Object(n.a)(l))}),gradientDirection:s}}},generate:function(e){var t=e||{isBrowser:!1,svgInput:!1,forceSVGSize:!0,seed:Math.random(),width:1920,height:1080,gridMode:this.GridMode.Poisson,gridOverridde:!1,cellSize:100,cellRandomness:.3,color:this.ColorFunction.DiagonalFromLeft,colorScaleInvert:!1,colorPalette:["#efee69","#21313e"],colorRandomness:0,quantizeSteps:0,colorOverride:!1,useGradient:!1,gradient:this.GradientFunction.Random,gradientNegativeFactor:.03,gradientPositiveFactor:.03,strokeColor:!1,strokeWidth:!1},i=t.isBrowser?h.a:h()(a(432));S=r()("".concat(t.seed)),E=new f.a(S);var s=[],c=[],d=l()([t.seed,t.width,t.height,t.gridMode,t.gridOverride,t.cellSize,t.cellRandomness]);if(d!==this.lastPointOptionsHash){this.lastPointOptionsHash=d;var g=t.cellRandomness*t.cellSize;if(t.gridMode===b.GridMode.Square)for(var p=-100;p<t.height+100+t.cellSize;p+=t.cellSize)for(var C=-100;C<t.width+100+t.cellSize;C+=t.cellSize)s.push([C+Math.floor(S()*(2*g+1))-g,p+Math.floor(S()*(2*g+1))-g]);else if(t.gridMode===b.GridMode.Triangle)for(var M=0,y=-100;y<t.width+100+t.cellSize;y+=t.cellSize){for(var w=t.cellSize/Math.sqrt(3)*(M%2)-100;w<t.height+100+t.cellSize;w+=t.cellSize)s.push([y+Math.floor(S()*(2*g+1))-g,w+Math.floor(S()*(2*g+1))-g]);M++}else if(t.gridMode===b.GridMode.Poisson)for(var z=m()(1.5*t.width,1.5*t.height,t.cellSize,S),N=z();N;)s.push([N[0]-.25*t.width,N[1]-.25*t.height]),N=z();else t.gridMode===b.GridMode.Override&&s.push.apply(s,Object(n.a)(t.gridOverride));for(var O=o.a.from(s),G=0;G<O.triangles.length;G+=3)c.push([s[O.triangles[G]],s[O.triangles[G+1]],s[O.triangles[G+2]]]);this.pointCache=c}else c=this.pointCache;var F=u.a.scale(t.colorPalette).mode("hcl"),k=i(t.svgInput);return t.forceSVGSize&&k.size(t.width,t.height),S=r()("".concat(t.seed)),c.forEach(function(e){var a,i=v(e.reduce(function(e,t){return e+t[0]},0)/3,0,t.width,0,1),r=v(e.reduce(function(e,t){return e+t[1]},0)/3,0,t.height,0,1);if(t.colorOverride)a=t.colorOverride(i,r);else{var o=t.color(i,r)+(S()-.5)*t.colorRandomness;if(t.quantizeSteps&&(o=Math.round(o*t.quantizeSteps)/(t.quantizeSteps-1)),t.colorScaleInvert&&(o=1-o),t.useGradient){var s,l=t.gradient(e,i,r),c=l.gradientVector,u=l.gradientDirection;a=(s=k.gradient("linear",function(e){e.at(0,F(o-t.gradientNegativeFactor*u).hex()),e.at(1,F(o+t.gradientPositiveFactor*u).hex())}).from(0,0)).to.apply(s,Object(n.a)(c))}else a=F(o).hex()}k.polygon(e.map(function(e){return e.join(",")}).join(" ")).fill(a).stroke({color:t.strokeColor||a,width:t.strokeWidth||1})}),k.svg()}};t.default=b},43:function(e,t,a){a(421)({presets:["@babel/preset-env"]}),e.exports=a(423).default},431:function(e,t){},449:function(e,t){},451:function(e,t){},573:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(233),o=a.n(r),s=(a(253),a(140)),l=a.n(s),c=a(246),u=a(234),d=a(42),h=a(89),g=a(63),m=a(247),p=a(235),f=a(90),v=a(245),S=a(236),E=a.n(S),b=a(575),C=a(576),M=a(577),y=a(578),w=a(579),z=a(580),N=a(581),O=a(582),G=a(583),F=a(237),k=a(238),j=a.n(k),P=a(239),x=a.n(P),I=a(141),R=a.n(I),H=a(43),V=a.n(H),B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={svgNeedsUpdating:!0,svgSizeCSS:{width:"",height:""},svgWidth:3840,svgHeight:2400,svgString:"",imageData:[],imageWidth:0,imageHeight:0,options:{isBrowser:!0,seed:4,width:3840,height:2400,gridMode:V.a.GridMode.Poisson,gridOverride:!1,cellSize:150,cellRandomness:.2,colorOverride:!1,color:V.a.ColorFunction.RadialFromBottom,colorScaleInvert:!1,colorPalette:["#e7a71d","#dc433e","#9e084b","#41062f"],colorRandomness:.15,quantizeSteps:0,useGradient:!0,gradient:V.a.GradientFunction.Random,gradientNegativeFactor:.03,gradientPositiveFactor:.03,strokeColor:!1,strokeWidth:1}},a.allColorFunctions=Object(d.a)(Object.entries(V.a.ColorFunction).map(function(e){return e[1]})),a.allGradientFunctions=Object(d.a)(Object.entries(V.a.GradientFunction).map(function(e){return e[1]})),a.inputHandler=E.a.debounce(a.handleOptionChange,150).bind(Object(f.a)(a)),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=a.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var a=atob(i),n=a.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=a.charCodeAt(o);e(new Blob([r],{type:t||"image/png"}))})}}),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"stripStyles",value:function(e){return e.replace(/style=\\?".*?\\?"/g,"")}},{key:"handleOptionChange",value:function(e){var t={svgNeedsUpdating:!0,options:this.state.options};"color"===e.id?t.options[e.id]=this.allColorFunctions[parseInt(e.value,10)]:"gradient"===e.id?t.options[e.id]=this.allGradientFunctions[parseInt(e.value,10)]:1===e.step?t.options[e.id]=parseInt(e.value,10):t.options[e.id]=parseFloat(e.value),"width"!==e.id&&"height"!==e.id||(console.log("yes"),t.options[e.id]=Math.max(t.options[e.id],256)),this.setState(t)}},{key:"handleToggle",value:function(e){var t=this;return function(a){console.log(a.target);var n={svgNeedsUpdating:!0,options:t.state.options};n.options[a.target.id]=e,t.setState(n)}}},{key:"handleChangeColorStops",value:function(e){var t=this;return function(){var a=t.state.options.colorPalette.length+e;if(a>0&&a<=20){var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette=j.a.scale(t.state.options.colorPalette).mode("lch").colors(a),t.setState(n)}}}},{key:"handleColorChange",value:function(e){var t=this;return function(a){console.log(a,e);var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette[e]=a.hex,t.setState(n)}}},{key:"handleFile",value:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=new Image;a.onload=function(){var e=document.getElementById("imageProcessingCanvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,e.width,e.height),t.setState({imageData:n.getImageData(0,0,n.canvas.width,n.canvas.height).data,imageWidth:a.width,imageHeight:a.height})},a.src=e.target.result},a.readAsDataURL(e.files[0])}},{key:"generateSVG",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a,n,i,r,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.svgNeedsUpdating,i=a.options,!n||!t){e.next=12;break}return e.next=4,this.setState({svgNeedsUpdating:!1});case 4:return e.next=6,this.setState({svgWidth:i.width,svgHeight:i.height});case 6:t.innerHTML="",r=V.a.generate(Object(c.a)({svgInput:t,forceSVGSize:!1},i)),o=document.getElementById("image-container").clientWidth/document.getElementById("root").clientHeight,s={width:"",height:""},i.width/i.height>o?s.width="100%":s.height="100vh",this.setState({svgSizeCSS:s,svgString:r});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveImage",value:function(){console.log(this.stripStyles(this.state.svgString)),x()("canvas",this.stripStyles(this.state.svgString)),document.getElementById("canvas").toBlob(function(e){R()(e,"tri2-".concat((new Date).toISOString(),".png"))})}},{key:"saveSVG",value:function(){var e=new Blob([this.stripStyles(this.state.svgString)]);R()(e,"tri2-".concat((new Date).toISOString(),".svg"))}},{key:"render",value:function(){var e=this;return i.a.createElement(b.a,{className:"main h-100"},i.a.createElement(C.a,{className:"h-100"},i.a.createElement(M.a,{xs:"8",lg:"9",className:"image-container",id:"image-container"},i.a.createElement("svg",{id:"image",style:this.state.svgSizeCSS,viewBox:"0 0 ".concat(this.state.svgWidth," ").concat(this.state.svgHeight),ref:this.generateSVG.bind(this)})),i.a.createElement(M.a,{xs:"4",lg:"3",className:"controls-container"},i.a.createElement(y.a,{className:"controls-form"},i.a.createElement("h1",{className:"header-light header-stylized-text"},"triangulator2"),i.a.createElement("small",null,"\xa9 2019 ",i.a.createElement("a",{href:"https://jackw01.github.io"},"jackw01"),". ",i.a.createElement("a",{href:"https://github.com/jackw01/triangulator2-app"},"View on Github")),i.a.createElement("hr",null),i.a.createElement(w.a,{className:"spacer-top"},i.a.createElement(z.a,{className:"input-group-label",for:"seed"},"Seed:"),i.a.createElement(N.a,{id:"seed",className:"w-100",bsSize:"sm",type:"number",step:"1",defaultValue:this.state.options.seed,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"resolution"},"Resolution:"),i.a.createElement(N.a,{id:"width",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.width,onChange:function(t){return e.inputHandler(t.target)}}),"\xa0x\xa0",i.a.createElement(N.a,{id:"height",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.height,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"gridMode"},"Grid Mode:"),i.a.createElement(N.a,{id:"gridMode",bsSize:"sm",type:"select",defaultValue:this.state.options.gridMode,onChange:function(t){return e.handleOptionChange(t.target)}},i.a.createElement("option",{value:"1"},"Square"),i.a.createElement("option",{value:"2"},"Triangle"),i.a.createElement("option",{value:"3"},"Poisson"),i.a.createElement("option",{value:"4"},"Override"))),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"cellSize"},"Cell Size:"),i.a.createElement("input",{id:"cellSize",type:"range",step:"1",min:"80",max:"512",defaultValue:this.state.options.cellSize,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:3===this.state.options.gridMode?"hidden":""},i.a.createElement(z.a,{className:"input-group-label",for:"cellRandomness"},"Cell Randomness:"),i.a.createElement("input",{id:"cellRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.cellRandomness,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"color"},"Color Mode:"),i.a.createElement(N.a,{id:"color",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allColorFunctions.map(function(e,t){return i.a.createElement("option",{value:t},e.name)})),i.a.createElement(O.a,{size:"sm",className:"spacer-top"},i.a.createElement(G.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.colorScaleInvert},"Default"),i.a.createElement(G.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.colorScaleInvert},"Invert"))),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"colorRandomness"},"Color Randomness:"),i.a.createElement("input",{id:"colorRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.colorRandomness,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:"color-picker-container"},i.a.createElement(z.a,{className:"input-group-label",for:"colorPalette"},"Color Palette:"),i.a.createElement(G.a,{id:"colorPaletteDecrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(-1).bind(this)},"Remove Color"),"\xa0",i.a.createElement(G.a,{id:"colorPaletteIncrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(1).bind(this)},"Add Color"),this.state.options.colorPalette.map(function(t,a){return i.a.createElement(F.ChromePicker,{color:t,disableAlpha:!0,onChangeComplete:e.handleColorChange(a).bind(e)})})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"quantizeSteps"},"Color Quantization Levels:"),i.a.createElement("input",{id:"quantizeSteps",type:"range",step:"1",min:"0",max:"10",defaultValue:this.state.options.quantizeSteps,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"useGradient"},"Generate Gradients:"),i.a.createElement(O.a,{size:"sm"},i.a.createElement(G.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.useGradient},"On"),i.a.createElement(G.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.useGradient},"Off"))),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradient"},"Gradient Mode:"),i.a.createElement(N.a,{id:"gradient",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allGradientFunctions.map(function(e,t){return i.a.createElement("option",{value:t},e.name)}))),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradientNegativeFactor"},"Gradient Negative Factor:"),i.a.createElement("input",{id:"gradientNegativeFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientNegativeFactor,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradientPositiveFactor"},"Gradient Positive Factor:"),i.a.createElement("input",{id:"gradientPositiveFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientPositiveFactor,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,{className:"color-picker-container"},i.a.createElement(G.a,{size:"lg",color:"primary",onClick:this.saveImage.bind(this)},"Save Image"),i.a.createElement("br",null),i.a.createElement(G.a,{className:"spacer-top",size:"lg",color:"secondary",onClick:this.saveSVG.bind(this)},"Save SVG"))))),i.a.createElement("canvas",{id:"imageProcessingCanvas",className:"hidden"}),i.a.createElement("canvas",{id:"canvas",className:"hidden",width:this.state.svgWidth,height:this.state.svgHeight}))}}]),t}(n.Component);o.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[248,1,2]]]);
//# sourceMappingURL=main.bb7477d4.chunk.js.map