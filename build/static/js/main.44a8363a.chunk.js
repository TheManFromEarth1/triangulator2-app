(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){var n=a(18),i=a(19);function o(e){return e*e*e*(e*(6*e-15)+10)}function r(e,t,a){return t+e*(a-t)}function s(e,t,a,n){var i=15&e,o=i<8?t:a,r=i<4?a:12===i||14===i?t:n;return(0===(1&i)?o:-o)+(0===(2&i)?r:-r)}e.exports=function(){"use strict";function e(t){n(this,e),this.permutation=[];for(var a=0;a<256;a++)this.permutation.push(a);for(var i=256;i>0;i--){var o=Math.floor(t()*i),r=this.permutation[i-1];this.permutation[i-1]=this.permutation[o],this.permutation[o]=r}for(var s=0;s<256;s++)this.permutation.push(this.permutation[s])}return i(e,[{key:"noise",value:function(e,t,a){var n=255&Math.floor(e),i=255&Math.floor(t),l=255&Math.floor(a),c=e-Math.floor(e),d=t-Math.floor(t),u=a-Math.floor(a),h=o(c),g=o(d),m=o(u),p=this.permutation[n]+i,f=this.permutation[p]+l,v=this.permutation[p+1]+l,S=this.permutation[n+1]+i,E=this.permutation[S]+l,b=this.permutation[S+1]+l;return r(m,r(g,r(h,s(this.permutation[f],c,d,u),s(this.permutation[E],c-1,d,u)),r(h,s(this.permutation[v],c,d-1,u),s(this.permutation[b],c-1,d-1,u))),r(g,r(h,s(this.permutation[f+1],c,d,u-1),s(this.permutation[E+1],c-1,d,u-1)),r(h,s(this.permutation[v+1],c,d-1,u-1),s(this.permutation[b+1],c-1,d-1,u-1))))+.5}}]),e}()},223:function(e,t,a){var n={"./bmp":224,"./bmp.js":224,"./dds":225,"./dds.js":225,"./gif":226,"./gif.js":226,"./jpg":227,"./jpg.js":227,"./png":228,"./png.js":228,"./psd":229,"./psd.js":229,"./svg":230,"./svg.js":230,"./tiff":231,"./tiff.js":231,"./webp":232,"./webp.js":232};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=223},243:function(e,t){e.exports=function(e,t,a,n){var i=a*a,o=3*i,r=a*Math.SQRT1_2,s=Math.ceil(e/r),l=Math.ceil(t/r),c=new Array(s*l),d=[],u=0,h=0;function g(e,t){var a=Math.floor(e/r),n=Math.floor(t/r),o=Math.max(a-2,0),d=Math.max(n-2,0),u=Math.min(a+3,s),h=Math.min(n+3,l);for(n=d;n<h;++n){var g=n*s;for(a=o;a<u;++a)if(c[g+a]){var m=c[g+a][0]-e,p=c[g+a][1]-t;if(m*m+p*p<i)return!1}}return!0}function m(e,t){var a=[e,t];return d.push(a),c[s*Math.floor(t/r)+Math.floor(e/r)]=a,h++,u++,a}return function(){if(!h)return m(n()*e,n()*t);for(;u;){for(var a=Math.floor(n()*u),r=0;r<30;++r){var s=2*Math.PI*n(),l=Math.sqrt(n()*o+i),c=d[a][0]+l*Math.cos(s),p=d[a][1]+l*Math.sin(s);if(c>=0&&c<e&&p>=0&&p<t&&g(c,p))return m(c,p)}d[a]=d[--u],d.length=u}return!1}}},248:function(e,t,a){e.exports=a(573)},253:function(e,t,a){},42:function(e,t,a){a(421)({presets:["@babel/preset-env"]}),e.exports=a(423).default},423:function(e,t,a){"use strict";a.r(t);var n=a(49),i=a(142),o=a.n(i),r=a(240),s=a(241),l=a.n(s),c=a(242),d=a.n(c),u=a(143),h=a.n(u),g=a(243),m=a.n(g),p=a(144),f=a.n(p);var v=Math.random,S=new f.a(v),E={pointCache:[],lastPointOptionsHash:"",GridMode:{Square:1,Triangle:2,Poisson:3,Override:4},ColorFunction:{Horizontal:function(e,t){return e},Vertical:function(e,t){return t},DiagonalFromLeft:function(e,t){return(e+t)/2},DiagonalFromRight:function(e,t){return(1-e+t)/2},RadialFromCenter:function(e,t){return Math.hypot(e-.5,t-.5)*Math.sqrt(2)*1.1},RadialFromBottom:function(e,t){return Math.hypot(e-.5,t-1.5)-.5},FromEdges:function(e,t){return.3*function(e,t){return 2*Math.min(Math.min(e,1-e),Math.min(t,1-t))}(e,t)+.7*(1-Math.hypot(e-.5,t-.5)*Math.sqrt(2))},Noise:function(e,t){return function(a,n){return S.noise(a*e,n*t,0)}}},GradientFunction:{Random:function(e,t,a){var n=Math.floor(3*v()),i=e[(n+1+Math.floor(2*v()))%3],o=[i[0]-e[n][0],i[1]-e[n][1]],r=[Math.abs(o[0]),Math.abs(o[1])],s=Math.max.apply(Math,r);return{gradientVector:[r[0]/s,r[1]/s],gradientDirection:Math.sign(o[0]*o[1])}}},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;t&&i.time("total"),t&&i.time("setup");var s=e||{isBrowser:!1,svgInput:!1,forceSVGSize:!0,seed:Math.random(),width:1920,height:1080,gridMode:this.GridMode.Poisson,gridOverridde:!1,cellSize:100,cellRandomness:.3,color:this.ColorFunction.DiagonalFromLeft,colorScaleInvert:!1,colorPalette:["#efee69","#21313e"],colorRandomness:0,quantizeSteps:0,colorOverride:!1,useGradient:!1,gradient:this.GradientFunction.Random,gradientNegativeFactor:.03,gradientPositiveFactor:.03,strokeColor:!1,strokeWidth:!1},c=s.isBrowser?h.a:h()(a(432));v=o()("".concat(s.seed)),S=new f.a(v),t&&i.timeEnd("setup"),t&&i.time("points");var u=[],g=[],p=l()([s.seed,s.width,s.height,s.gridMode,s.gridOverride,s.cellSize,s.cellRandomness]);if(p!==this.lastPointOptionsHash){this.lastPointOptionsHash=p;var b=s.cellRandomness*s.cellSize;if(s.gridMode===E.GridMode.Square)for(var M=-100;M<s.height+100+s.cellSize;M+=s.cellSize)for(var C=-100;C<s.width+100+s.cellSize;C+=s.cellSize)u.push([C+Math.floor(v()*(2*b+1))-b,M+Math.floor(v()*(2*b+1))-b]);else if(s.gridMode===E.GridMode.Triangle)for(var y=0,w=-100;w<s.width+100+s.cellSize;w+=s.cellSize){for(var z=s.cellSize/Math.sqrt(3)*(y%2)-100;z<s.height+100+s.cellSize;z+=s.cellSize)u.push([w+Math.floor(v()*(2*b+1))-b,z+Math.floor(v()*(2*b+1))-b]);y++}else if(s.gridMode===E.GridMode.Poisson)for(var N=m()(1.5*s.width,1.5*s.height,s.cellSize,v),O=N();O;)u.push([O[0]-.25*s.width,O[1]-.25*s.height]),O=N();else s.gridMode===E.GridMode.Override&&u.push.apply(u,Object(n.a)(s.gridOverride));for(var G=r.a.from(u),F=0;F<G.triangles.length;F+=3)g.push([u[G.triangles[F]],u[G.triangles[F+1]],u[G.triangles[F+2]]]);this.pointCache=g}else g=this.pointCache;t&&i.timeEnd("points");var k=d.a.scale(s.colorPalette).mode("hcl"),j=c(s.svgInput);s.forceSVGSize&&j.size(s.width,s.height),v=o()("".concat(s.seed)),t&&i.time("draw");for(var x=0;x<g.length;x++){var P=(g[x][0][0]+g[x][1][0]+g[x][2][0])/3/s.width,I=(g[x][0][1]+g[x][1][1]+g[x][2][1])/3/s.height,R=void 0;s.colorOverride?R=s.colorOverride(P,I):function(){var e=s.color(P,I)+(v()-.5)*s.colorRandomness;if(s.quantizeSteps&&(e=Math.round(e*s.quantizeSteps)/(s.quantizeSteps-1)),s.colorScaleInvert&&(e=1-e),s.useGradient){var t,a=s.gradient(g[x],P,I),i=a.gradientVector,o=a.gradientDirection;R=(t=j.gradient("linear",function(t){t.at(0,k(e-s.gradientNegativeFactor*o).hex()),t.at(1,k(e+s.gradientPositiveFactor*o).hex())}).from(0,0)).to.apply(t,Object(n.a)(i))}else R=k(e).hex()}(),j.polygon(g[x].map(function(e){return e.join(",")}).join(" ")).fill(R).stroke({color:s.strokeColor||R,width:s.strokeWidth||1})}return t&&i.timeEnd("draw"),t&&i.timeEnd("total"),j.svg()}};t.default=E},431:function(e,t){},449:function(e,t){},451:function(e,t){},573:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(233),r=a.n(o),s=(a(253),a(140)),l=a.n(s),c=a(246),d=a(234),u=a(49),h=a(89),g=a(63),m=a(247),p=a(235),f=a(90),v=a(245),S=a(236),E=a.n(S),b=a(575),M=a(576),C=a(577),y=a(578),w=a(579),z=a(580),N=a(581),O=a(582),G=a(583),F=a(237),k=a(238),j=a.n(k),x=a(239),P=a.n(x),I=a(141),R=a.n(I),H=a(42),V=a.n(H),B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={svgNeedsUpdating:!0,svgSizeCSS:{width:"",height:""},svgWidth:3840,svgHeight:2400,svgString:"",imageData:[],imageWidth:0,imageHeight:0,options:{isBrowser:!0,seed:4,width:3840,height:2400,gridMode:V.a.GridMode.Poisson,gridOverride:!1,cellSize:150,cellRandomness:.2,colorOverride:!1,color:V.a.ColorFunction.RadialFromBottom,colorScaleInvert:!1,colorPalette:["#e7a71d","#dc433e","#9e084b","#41062f"],colorRandomness:.15,quantizeSteps:0,useGradient:!0,gradient:V.a.GradientFunction.Random,gradientNegativeFactor:.03,gradientPositiveFactor:.03,strokeColor:!1,strokeWidth:1}},a.allColorFunctions=Object(u.a)(Object.entries(V.a.ColorFunction).map(function(e){return e[1]})),a.allGradientFunctions=Object(u.a)(Object.entries(V.a.GradientFunction).map(function(e){return e[1]})),a.inputHandler=E.a.debounce(a.handleOptionChange,150).bind(Object(f.a)(a)),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=a.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var a=atob(i),n=a.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=a.charCodeAt(r);e(new Blob([o],{type:t||"image/png"}))})}}),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"stripStyles",value:function(e){return e.replace(/style=\\?".*?\\?"/g,"")}},{key:"handleOptionChange",value:function(e){var t={svgNeedsUpdating:!0,options:this.state.options};"color"===e.id?t.options[e.id]=this.allColorFunctions[parseInt(e.value,10)]:"gradient"===e.id?t.options[e.id]=this.allGradientFunctions[parseInt(e.value,10)]:1===e.step?t.options[e.id]=parseInt(e.value,10):t.options[e.id]=parseFloat(e.value),"width"!==e.id&&"height"!==e.id||(console.log("yes"),t.options[e.id]=Math.max(t.options[e.id],256)),this.setState(t)}},{key:"handleToggle",value:function(e){var t=this;return function(a){console.log(a.target);var n={svgNeedsUpdating:!0,options:t.state.options};n.options[a.target.id]=e,t.setState(n)}}},{key:"handleChangeColorStops",value:function(e){var t=this;return function(){var a=t.state.options.colorPalette.length+e;if(a>0&&a<=20){var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette=j.a.scale(t.state.options.colorPalette).mode("lch").colors(a),t.setState(n)}}}},{key:"handleColorChange",value:function(e){var t=this;return function(a){console.log(a,e);var n={svgNeedsUpdating:!0,options:t.state.options};n.options.colorPalette[e]=a.hex,t.setState(n)}}},{key:"handleFile",value:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=new Image;a.onload=function(){var e=document.getElementById("imageProcessingCanvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,e.width,e.height),t.setState({imageData:n.getImageData(0,0,n.canvas.width,n.canvas.height).data,imageWidth:a.width,imageHeight:a.height})},a.src=e.target.result},a.readAsDataURL(e.files[0])}},{key:"generateSVG",value:function(){var e=Object(d.a)(l.a.mark(function e(t){var a,n,i,o,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.svgNeedsUpdating,i=a.options,!n||!t){e.next=15;break}return console.time("1"),e.next=5,this.setState({svgNeedsUpdating:!1});case 5:return e.next=7,this.setState({svgWidth:i.width,svgHeight:i.height});case 7:return t.innerHTML="",o=V.a.generate(Object(c.a)({svgInput:t,forceSVGSize:!1},i)),r=document.getElementById("image-container").clientWidth/document.getElementById("root").clientHeight,s={width:"",height:""},i.width/i.height>r?s.width="100%":s.height="100vh",e.next=14,this.setState({svgSizeCSS:s,svgString:o});case 14:console.timeEnd("1");case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveImage",value:function(){console.log(this.stripStyles(this.state.svgString)),P()("canvas",this.stripStyles(this.state.svgString)),document.getElementById("canvas").toBlob(function(e){R()(e,"tri2-".concat((new Date).toISOString(),".png"))})}},{key:"saveSVG",value:function(){var e=new Blob([this.stripStyles(this.state.svgString)]);R()(e,"tri2-".concat((new Date).toISOString(),".svg"))}},{key:"render",value:function(){var e=this;return i.a.createElement(b.a,{className:"main h-100"},i.a.createElement(M.a,{className:"h-100"},i.a.createElement(C.a,{xs:"8",lg:"9",className:"image-container",id:"image-container"},i.a.createElement("svg",{id:"image",style:this.state.svgSizeCSS,viewBox:"0 0 ".concat(this.state.svgWidth," ").concat(this.state.svgHeight),ref:this.generateSVG.bind(this)})),i.a.createElement(C.a,{xs:"4",lg:"3",className:"controls-container"},i.a.createElement(y.a,{className:"controls-form"},i.a.createElement("h1",{className:"header-light header-stylized-text"},"triangulator2"),i.a.createElement("small",null,"\xa9 2019 ",i.a.createElement("a",{href:"https://jackw01.github.io"},"jackw01"),". ",i.a.createElement("a",{href:"https://github.com/jackw01/triangulator2-app"},"View on Github")),i.a.createElement("hr",null),i.a.createElement(w.a,{className:"spacer-top"},i.a.createElement(z.a,{className:"input-group-label",for:"seed"},"Seed:"),i.a.createElement(N.a,{id:"seed",className:"w-100",bsSize:"sm",type:"number",step:"1",defaultValue:this.state.options.seed,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"resolution"},"Resolution:"),i.a.createElement(N.a,{id:"width",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.width,onChange:function(t){return e.inputHandler(t.target)}}),"\xa0x\xa0",i.a.createElement(N.a,{id:"height",bsSize:"sm",type:"number",step:"1",min:"0",max:"8192",defaultValue:this.state.options.height,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"gridMode"},"Grid Mode:"),i.a.createElement(N.a,{id:"gridMode",bsSize:"sm",type:"select",defaultValue:this.state.options.gridMode,onChange:function(t){return e.handleOptionChange(t.target)}},i.a.createElement("option",{value:"1"},"Square"),i.a.createElement("option",{value:"2"},"Triangle"),i.a.createElement("option",{value:"3"},"Poisson"),i.a.createElement("option",{value:"4"},"Override"))),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"cellSize"},"Cell Size:"),i.a.createElement("input",{id:"cellSize",type:"range",step:"1",min:"80",max:"512",defaultValue:this.state.options.cellSize,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:3===this.state.options.gridMode?"hidden":""},i.a.createElement(z.a,{className:"input-group-label",for:"cellRandomness"},"Cell Randomness:"),i.a.createElement("input",{id:"cellRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.cellRandomness,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"color"},"Color Mode:"),i.a.createElement(N.a,{id:"color",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allColorFunctions.map(function(e,t){return i.a.createElement("option",{value:t},e.name)})),i.a.createElement(O.a,{size:"sm",className:"spacer-top"},i.a.createElement(G.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.colorScaleInvert},"Default"),i.a.createElement(G.a,{id:"colorScaleInvert",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.colorScaleInvert},"Invert"))),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"colorRandomness"},"Color Randomness:"),i.a.createElement("input",{id:"colorRandomness",type:"range",step:"0.001",min:"0",max:"1",defaultValue:this.state.options.colorRandomness,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:"color-picker-container"},i.a.createElement(z.a,{className:"input-group-label",for:"colorPalette"},"Color Palette:"),i.a.createElement(G.a,{id:"colorPaletteDecrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(-1).bind(this)},"Remove Color"),"\xa0",i.a.createElement(G.a,{id:"colorPaletteIncrease",size:"sm",color:"secondary",onClick:this.handleChangeColorStops(1).bind(this)},"Add Color"),this.state.options.colorPalette.map(function(t,a){return i.a.createElement(F.ChromePicker,{color:t,disableAlpha:!0,onChangeComplete:e.handleColorChange(a).bind(e)})})),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"quantizeSteps"},"Color Quantization Levels:"),i.a.createElement("input",{id:"quantizeSteps",type:"range",step:"1",min:"0",max:"10",defaultValue:this.state.options.quantizeSteps,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,null,i.a.createElement(z.a,{className:"input-group-label",for:"useGradient"},"Generate Gradients:"),i.a.createElement(O.a,{size:"sm"},i.a.createElement(G.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!0).bind(this),active:this.state.options.useGradient},"On"),i.a.createElement(G.a,{id:"useGradient",color:"secondary",onClick:this.handleToggle(!1).bind(this),active:!this.state.options.useGradient},"Off"))),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradient"},"Gradient Mode:"),i.a.createElement(N.a,{id:"gradient",bsSize:"sm",type:"select",defaultValue:5,onChange:function(t){return e.handleOptionChange(t.target)}},this.allGradientFunctions.map(function(e,t){return i.a.createElement("option",{value:t},e.name)}))),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradientNegativeFactor"},"Gradient Negative Factor:"),i.a.createElement("input",{id:"gradientNegativeFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientNegativeFactor,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement(w.a,{className:this.state.options.useGradient?"":"hidden"},i.a.createElement(z.a,{className:"input-group-label",for:"gradientPositiveFactor"},"Gradient Positive Factor:"),i.a.createElement("input",{id:"gradientPositiveFactor",type:"range",step:"0.001",min:"0",max:"0.1",defaultValue:this.state.options.gradientPositiveFactor,onChange:function(t){return e.inputHandler(t.target)}})),i.a.createElement("hr",null),i.a.createElement(w.a,{className:"color-picker-container"},i.a.createElement(G.a,{size:"lg",color:"primary",onClick:this.saveImage.bind(this)},"Save Image"),i.a.createElement("br",null),i.a.createElement(G.a,{className:"spacer-top",size:"lg",color:"secondary",onClick:this.saveSVG.bind(this)},"Save SVG"))))),i.a.createElement("canvas",{id:"imageProcessingCanvas",className:"hidden"}),i.a.createElement("canvas",{id:"canvas",className:"hidden",width:this.state.svgWidth,height:this.state.svgHeight}))}}]),t}(n.Component);r.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[248,1,2]]]);
//# sourceMappingURL=main.44a8363a.chunk.js.map